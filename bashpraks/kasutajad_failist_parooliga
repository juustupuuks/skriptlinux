#!/bin/bash
# Autor: Joonas Puur
# Skript: kasutajad_failist_parooliga – loeb failist kasutaja:parool ja lisab need süsteemi

if [ "$(id -u)" -ne 0 ]; then
  echo "❌ Skript peab jooksma root kasutajana!"
  exit 1
fi

if [ -z "$1" ]; then
  echo "Kasutus: $0 <failinimi>"
  exit 1
fi

FILE=$1

while IFS=":" read USER PASS; do
  [ -n "$USER" ] || continue
  useradd -m -s /bin/bash "$USER"
  echo "$USER:$PASS" | chpasswd
  echo "✅ Kasutaja '$USER' loodud parooliga."
done < "$FILE"
